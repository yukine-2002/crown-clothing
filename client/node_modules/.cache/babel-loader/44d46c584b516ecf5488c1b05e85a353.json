{"ast":null,"code":"import _regeneratorRuntime from\"D:/Document/VsCode Web/StudyFontEnd/ReactJs/crown-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"D:/Document/VsCode Web/StudyFontEnd/ReactJs/crown-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"D:/Document/VsCode Web/StudyFontEnd/ReactJs/crown-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/Document/VsCode Web/StudyFontEnd/ReactJs/crown-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Document/VsCode Web/StudyFontEnd/ReactJs/crown-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/Document/VsCode Web/StudyFontEnd/ReactJs/crown-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Document/VsCode Web/StudyFontEnd/ReactJs/crown-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import'./App.css';import HomePage from'./Pages/homepage.component';import{Route}from'react-router-dom';import{Switch}from'react-router-dom';import{Redirect}from'react-router';import ShopPage from'./Pages/shop/shop.component';import Header from'./Component/header/header.component';import SignInAndSignOut from'./Pages/sign-in-and-sign-out/sign-in-and-sign-out';import{auth,createUserProfileDocument}from'./firebase/firebase.utils';import React from'react';import{connect}from'react-redux';import{setCurrentUser as _setCurrentUser}from'./redux/user/user.actions';import{selectorCurrentUser}from'./redux/user/user.selectors';import CheckOut from'./Pages/checkout/checkout.component';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.unsubcribeFromAuth=null;_this.state={currentUser:null};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var setCurrentUser=this.props.setCurrentUser;this.unsubscribeFromAuth=auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=5;break;}_context.next=3;return createUserProfileDocument(userAuth);case 3:userRef=_context.sent;userRef.onSnapshot(function(snapShot){setCurrentUser({currentUser:_objectSpread({id:snapShot.id},snapShot.data())});});case 5:setCurrentUser(userAuth);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unsubcribeFromAuth();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:HomePage}),/*#__PURE__*/_jsx(Route,{path:\"/shop\",component:ShopPage}),/*#__PURE__*/_jsx(Route,{path:\"/checkout\",component:CheckOut}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/signs\",render:function render(){return _this2.props.currentUser?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(SignInAndSignOut,{});}})]})]});}}]);return App;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{currentUser:selectorCurrentUser(state)};};var MapDispatchToProps=function MapDispatchToProps(dispatch){return{setCurrentUser:function setCurrentUser(user){return dispatch(_setCurrentUser(user));}};};export default connect(mapStateToProps,MapDispatchToProps)(App);","map":{"version":3,"sources":["D:/Document/VsCode Web/StudyFontEnd/ReactJs/crown-clothing/src/App.js"],"names":["HomePage","Route","Switch","Redirect","ShopPage","Header","SignInAndSignOut","auth","createUserProfileDocument","React","connect","setCurrentUser","selectorCurrentUser","CheckOut","App","unsubcribeFromAuth","state","currentUser","props","unsubscribeFromAuth","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","id","data","Component","mapStateToProps","MapDispatchToProps","dispatch","user"],"mappings":"msCAAA,MAAO,WAAP,CACA,MAAOA,CAAAA,QAAP,KAAqB,4BAArB,CACA,OAAQC,KAAR,KAAoB,kBAApB,CACA,OAASC,MAAT,KAAuB,kBAAvB,CACA,OAASC,QAAT,KAAyB,cAAzB,CACA,MAAOC,CAAAA,QAAP,KAAqB,6BAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,qCAAnB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,mDAA7B,CACA,OAAQC,IAAR,CAAcC,yBAAd,KAA8C,2BAA9C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,OAAQC,cAAc,GAAdA,CAAAA,eAAR,KAA6B,2BAA7B,CACA,OAAQC,mBAAR,KAAkC,6BAAlC,CACA,MAAOC,CAAAA,QAAP,KAAqB,qCAArB,C,2FACMC,CAAAA,G,sGACJ,cAAc,qCACZ,wBADY,MAQhBC,kBARgB,CAQK,IARL,CAGZ,MAAKC,KAAL,CAAa,CACXC,WAAW,CAAG,IADH,CAAb,CAHY,aAMb,C,iDAIH,4BAAoB,CAElB,GAAON,CAAAA,cAAP,CAAyB,KAAKO,KAA9B,CAAOP,cAAP,CACA,KAAKQ,mBAAL,CAA2BZ,IAAI,CAACa,kBAAL,0FAAwB,iBAAMC,QAAN,kIAC7CA,QAD6C,+CAEzBb,CAAAA,yBAAyB,CAACa,QAAD,CAFA,QAEzCC,OAFyC,eAI/CA,OAAO,CAACC,UAAR,CAAmB,SAAAC,QAAQ,CAAI,CAE/Bb,cAAc,CAAC,CACXM,WAAW,gBACTQ,EAAE,CAAED,QAAQ,CAACC,EADJ,EAEND,QAAQ,CAACE,IAAT,EAFM,CADA,CAAD,CAAd,CAOC,CATD,EAJ+C,OAejDf,cAAc,CAACU,QAAD,CAAd,CAfiD,sDAAxB,+DAA3B,CAiBD,C,oCACC,+BAAsB,CACpB,KAAKN,kBAAL,GACD,C,sBACD,iBAAS,iBACP,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,KAAC,MAAD,IADF,cAEE,MAAC,MAAD,yBACG,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAE,GAAnB,CAAuB,SAAS,CAAEf,QAAlC,EADH,cAEG,KAAC,KAAD,EAAQ,IAAI,CAAE,OAAd,CAAsB,SAAS,CAAEI,QAAjC,EAFH,cAGG,KAAC,KAAD,EAAQ,IAAI,CAAE,WAAd,CAA0B,SAAS,CAAES,QAArC,EAHH,cAIG,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAE,QAAnB,CAA4B,MAAM,CAAI,wBAAK,CAAA,MAAI,CAACK,KAAL,CAAWD,WAAX,cAA0B,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAA1B,cAAkD,KAAC,gBAAD,IAAvD,EAAtC,EAJH,GAFF,GADF,CAYD,C,iBAhDeR,KAAK,CAACkB,S,EAmDxB,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACZ,KAAD,QAAW,CACjCC,WAAW,CAAGL,mBAAmB,CAACI,KAAD,CADA,CAAX,EAAxB,CAGA,GAAMa,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,QAAK,CACtCnB,cAAc,CAAG,wBAAAoB,IAAI,QAAID,CAAAA,QAAQ,CAACnB,eAAc,CAACoB,IAAD,CAAf,CAAZ,EADiB,CAAL,EAAnC,CAIA,cAAerB,CAAAA,OAAO,CAACkB,eAAD,CAAiBC,kBAAjB,CAAP,CAA4Cf,GAA5C,CAAf","sourcesContent":["import './App.css';\r\nimport HomePage from './Pages/homepage.component';\r\nimport {Route} from 'react-router-dom';\r\nimport { Switch } from 'react-router-dom';\r\nimport { Redirect } from 'react-router';\r\nimport ShopPage from './Pages/shop/shop.component'\r\nimport Header from './Component/header/header.component';\r\nimport SignInAndSignOut from './Pages/sign-in-and-sign-out/sign-in-and-sign-out';\r\nimport {auth, createUserProfileDocument} from './firebase/firebase.utils';\r\nimport React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {setCurrentUser} from './redux/user/user.actions';\r\nimport {selectorCurrentUser} from './redux/user/user.selectors';\r\nimport CheckOut from './Pages/checkout/checkout.component';\r\nclass App extends React.Component {\r\n  constructor (){\r\n    super();\r\n\r\n    this.state = {\r\n      currentUser : null\r\n    }\r\n  }\r\n  \r\nunsubcribeFromAuth = null;\r\n\r\ncomponentDidMount() {\r\n\r\n  const {setCurrentUser} = this.props;\r\n  this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\r\n    if (userAuth) {\r\n      const userRef = await createUserProfileDocument(userAuth);\r\n\r\n      userRef.onSnapshot(snapShot => {\r\n      \r\n      setCurrentUser({\r\n          currentUser: {\r\n            id: snapShot.id,\r\n            ...snapShot.data()\r\n          }\r\n        });\r\n\r\n      });\r\n    }\r\n    setCurrentUser(userAuth );\r\n  });\r\n}\r\n  componentWillUnmount(){\r\n    this.unsubcribeFromAuth();\r\n  }\r\n  render (){\r\n    return (\r\n      <div className=\"App\">\r\n        <Header />\r\n        <Switch>\r\n           <Route exact path ='/' component={HomePage} />\r\n           <Route  path ='/shop' component={ShopPage} />\r\n           <Route  path ='/checkout' component={CheckOut} />\r\n           <Route exact path ='/signs' render = {()=> this.props.currentUser ? (<Redirect to='/' />) : (<SignInAndSignOut />)} />\r\n        </Switch>\r\n      \r\n      </div>\r\n    );\r\n  }\r\n  \r\n}\r\nconst mapStateToProps = (state) =>({\r\n  currentUser : selectorCurrentUser(state)\r\n})\r\nconst MapDispatchToProps = dispatch => ({\r\n  setCurrentUser : user => dispatch(setCurrentUser(user))\r\n})\r\n\r\nexport default connect(mapStateToProps,MapDispatchToProps)(App);\r\n"]},"metadata":{},"sourceType":"module"}